<?xml version="1.0" encoding="utf-8" ?>
<Suite Title="Itunes" Id="Itunes" SourceUrl="" HelpUrl="" HelpText="Documentation">

  <Resources>
    <Resource Id="Medias">
      <Item Id="all" Title="All"/>
      <Item Id="movie" Title="Movie"/>
      <Item Id="podcast" Title="Podcast"/>
      <Item Id="music" Title="Music"/>
      <Item Id="musicVideo" Title="Music Video"/>
      <Item Id="audiobook" Title="Audio Book"/>
      <Item Id="shortFilm" Title="Short Film"/>
      <Item Id="tvShow" Title="TV Show"/>
      <Item Id="software" Title="Software"/>
      <Item Id="ebook" Title="eBook"/>
    </Resource>	
    <Resource Id="Countries">
			<Item Id="AF" Title="Afghanistan"/>
			<Item Id="AL" Title="Albania"/>
			<Item Id="DZ" Title="Algeria"/>
			<Item Id="AO" Title="Angola"/>
			<Item Id="AR" Title="Argentina"/>
			<Item Id="AU" Title="Australia"/>
			<Item Id="AT" Title="Austria"/>
			<Item Id="AZ" Title="Azerbaijan"/>
			<Item Id="BH" Title="Bahrain"/>
			<Item Id="BD" Title="Bangladesh"/>
			<Item Id="BY" Title="Belarus"/>
			<Item Id="BE" Title="Belgium"/>
			<Item Id="BO" Title="Bolivia"/>
			<Item Id="BA" Title="Bosnia and Herzegovina"/>
			<Item Id="BW" Title="Botswana"/>
			<Item Id="BR" Title="Brazil"/>
			<Item Id="BG" Title="Bulgaria"/>
			<Item Id="BF" Title="Burkina Faso"/>
			<Item Id="KH" Title="Cambodia"/>
			<Item Id="CM" Title="Cameroon"/>
			<Item Id="CA" Title="Canada"/>
			<Item Id="CF" Title="Central Africa"/>
			<Item Id="TD" Title="Chad"/>
			<Item Id="CL" Title="Chile"/>
			<Item Id="CN" Title="China"/>
			<Item Id="CO" Title="Colombia"/>
			<Item Id="CG" Title="Congo"/>
			<Item Id="CR" Title="Costa Rica"/>
			<Item Id="HR" Title="Croatia"/>
			<Item Id="CU" Title="Cuba"/>
			<Item Id="CY" Title="Cyprus"/>
			<Item Id="CZ" Title="Czechia"/>
			<Item Id="CI" Title="CÃ´te d'Ivoire"/>
			<Item Id="DK" Title="Denmark"/>
			<Item Id="DO" Title="Dominican Republic"/>
			<Item Id="EC" Title="Ecuador"/>
			<Item Id="EG" Title="Egypt"/>
			<Item Id="SV" Title="El Salvador"/>
			<Item Id="EE" Title="Estonia"/>
			<Item Id="ET" Title="Ethiopia"/>
			<Item Id="FI" Title="Finland"/>
			<Item Id="FR" Title="France"/>
			<Item Id="GE" Title="Georgia"/>
			<Item Id="DE" Title="Germany"/>
			<Item Id="GH" Title="Ghana"/>
			<Item Id="GR" Title="Greece"/>
			<Item Id="GL" Title="Greenland"/>
			<Item Id="GT" Title="Guatemala"/>
			<Item Id="GN" Title="Guinea"/>
			<Item Id="GY" Title="Guyana"/>
			<Item Id="HT" Title="Haiti"/>
			<Item Id="HN" Title="Honduras"/>
			<Item Id="HK" Title="Hong Kong"/>
			<Item Id="HU" Title="Hungary"/>
			<Item Id="IS" Title="Iceland"/>
			<Item Id="IN" Title="India"/>
			<Item Id="ID" Title="Indonesia"/>
			<Item Id="IR" Title="Iran"/>
			<Item Id="IQ" Title="Iraq"/>
			<Item Id="IE" Title="Ireland"/>
			<Item Id="IL" Title="Israel"/>
			<Item Id="IT" Title="Italy"/>
			<Item Id="JM" Title="Jamaica"/>
			<Item Id="JP" Title="Japan"/>
			<Item Id="JO" Title="Jordan"/>
			<Item Id="KZ" Title="Kazakhstan"/>
			<Item Id="KE" Title="Kenya"/>
			<Item Id="KW" Title="Kuwait"/>
			<Item Id="LV" Title="Latvia"/>
			<Item Id="LB" Title="Lebanon"/>
			<Item Id="LR" Title="Liberia"/>
			<Item Id="LY" Title="Libya"/>
			<Item Id="LT" Title="Lithuania"/>
			<Item Id="LU" Title="Luxembourg"/>
			<Item Id="MK" Title="Macedonia"/>
			<Item Id="MG" Title="Madagascar"/>
			<Item Id="MW" Title="Malawi"/>
			<Item Id="MY" Title="Malaysia"/>
			<Item Id="ML" Title="Mali"/>
			<Item Id="MT" Title="Malta"/>
			<Item Id="MX" Title="Mexico"/>
			<Item Id="MD" Title="Moldova"/>
			<Item Id="MC" Title="Monaco"/>
			<Item Id="MN" Title="Mongolia"/>
			<Item Id="ME" Title="Montenegro"/>
			<Item Id="MA" Title="Morocco"/>
			<Item Id="MZ" Title="Mozambique"/>
			<Item Id="MM" Title="Myanmar"/>
			<Item Id="NA" Title="Namibia"/>
			<Item Id="NP" Title="Nepal"/>
			<Item Id="NL" Title="Netherlands"/>
			<Item Id="NZ" Title="New Zealand"/>
			<Item Id="NI" Title="Nicaragua"/>
			<Item Id="NE" Title="Niger"/>
			<Item Id="NG" Title="Nigeria"/>
			<Item Id="NO" Title="Norway"/>
			<Item Id="OM" Title="Oman"/>
			<Item Id="PK" Title="Pakistan"/>
			<Item Id="PS" Title="Palestine"/>
			<Item Id="PA" Title="Panama"/>
			<Item Id="PY" Title="Paraguay"/>
			<Item Id="PE" Title="Peru"/>
			<Item Id="PH" Title="Philippines"/>
			<Item Id="PL" Title="Poland"/>
			<Item Id="PT" Title="Portugal"/>
			<Item Id="PR" Title="Puerto Rico"/>
			<Item Id="QA" Title="Qatar"/>
			<Item Id="RO" Title="Romania"/>
			<Item Id="RU" Title="Russia"/>
			<Item Id="RW" Title="Rwanda"/>
			<Item Id="SA" Title="Saudi Arabia"/>
			<Item Id="SN" Title="Senegal"/>
			<Item Id="RS" Title="Serbia"/>
			<Item Id="SL" Title="Sierra Leone"/>
			<Item Id="SG" Title="Singapore"/>
			<Item Id="SK" Title="Slovakia"/>
			<Item Id="SI" Title="Slovenia"/>
			<Item Id="SO" Title="Somalia"/>
			<Item Id="ZA" Title="South Africa"/>
			<Item Id="KR" Title="Korea"/>
			<Item Id="ES" Title="Spain"/>
			<Item Id="LK" Title="Sri Lanka"/>
			<Item Id="SD" Title="Sudan"/>
			<Item Id="SE" Title="Sweden"/>
			<Item Id="CH" Title="Switzerland"/>
			<Item Id="SY" Title="Syria"/>
			<Item Id="TW" Title="Taiwan"/>
			<Item Id="TZ" Title="Tanzania"/>
			<Item Id="TH" Title="Thailand"/>
			<Item Id="TN" Title="Tunisia"/>
			<Item Id="TR" Title="Turkey"/>
			<Item Id="TM" Title="Turkmenistan"/>
			<Item Id="UG" Title="Uganda"/>
			<Item Id="UA" Title="Ukraine"/>
			<Item Id="AE" Title="United Arab Emirates"/>
			<Item Id="GB" Title="United Kingdom"/>
			<Item Id="US" Title="USA"/>
			<Item Id="UY" Title="Uruguay"/>
			<Item Id="UZ" Title="Uzbekistan"/>
			<Item Id="VE" Title="Venezuela"/>
			<Item Id="VN" Title="Viet Nam"/>
			<Item Id="YE" Title="Yemen"/>
			<Item Id="ZM" Title="Zambia"/>
			<Item Id="ZW" Title="Zimbabwe"/>
    </Resource>
  </Resources>

  <RestConnector Title="Search" Id="Search">
    <Parameters>
      <Text Id="Query" Title="Query" Required="true" Debug.DefaultValue="obama"/>
      <Select Id="Media" Title="Filter by Media Type" Required="false" DefaultValue="all">
        <DataSource>
          <Resource Id="Medias"/>
        </DataSource>
      </Select>
      <Select Id="Country" Title="Country Store" Required="true" DefaultValue="US">
        <DataSource>
          <Item Id="" Title="All"/>
          <Resource Id="Countries"/>
        </DataSource>
      </Select>
      <Checkbox Id="ExplicitContent" Title="Hide Explicit Content" DefaultValue="false"/>
    </Parameters>
    <Paging PageSize="50" EvenPages="true"/>		
    <Fetch>
      <Fetch.Url>
        <![CDATA[
					http://api.itunes.apple.com/search?term=@Utils.UrlEncode(Model.Query)
					@if(Model.Media != "all")
					{
						@: &entity=@(Model.Media)
					}
					&limit=@(Model.PageCursor.NextTake)
					&explicit=@(Model.ExplicitContent ? "Yes" : "No")
					&country=@(Model.Country)
				]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="results.*">
				<JsonPath Expr="wrapperType" Id="Type" Title="Type" Converter="String"/>
				<JsonPath Expr="kind" Id="Kind" Title="Kind" Converter="String"/>
				<JsonPath Expr="artistId" Id="ArtistId" Title="Artist Id" Converter="String"/>
				<JsonPath Expr="artistName" Id="ArtistName" Title="Artist Name" Converter="String"/>
				<JsonPath Expr="collectionId" Id="CollectionId" Title="Collection Id" Converter="String"/>
				<JsonPath Expr="collectionName" Id="CollectionName" Title="Collection Name" Converter="String"/>
				<JsonPath Expr="trackId" Id="TrackId" Title="Track Id" Converter="String"/>
				<JsonPath Expr="trackName" Id="TrackName" Title="Track Name" Converter="String"/>
				<JsonPath Expr="trackViewUrl" Id="TrackUrl" Title="Track URL" Converter="String"/>
				<JsonPath Expr="collectionViewUrl" Id="CollectionUrl" Title="Collection URL" Converter="String"/>
				<JsonPath Expr="artistViewUrl" Id="ArtistUrl" Title="Artist URL" Converter="String"/>
				<JsonPath Expr="previewUrl" Id="PreviewUrl" Title="Preview URL" Converter="String"/>
				<JsonPath Expr="country" Id="Country" Title="Country" Converter="String"/>
				<JsonPath Expr="trackPrice" Id="TrackPrice" Title="Track Price" Converter="String"/>
				<JsonPath Expr="currency" Id="Currency" Title="Currency" Converter="String"/>
				<JsonPath Expr="collectionPrice" Id="CollectionPrice" Title="CollectionPrice" Converter="String"/>
				<JsonPath Expr="releaseDate" Id="ReleaseDate" Title="Release Date" Converter="String"/>
				<JsonPath Expr="primaryGenreName" Id="PrimaryGenre" Title="Primary Genre" Converter="String"/>
				<JsonPath Expr="isStreamable" Id="Streamable" Title="Streamable" Converter="Bool"/>
			</JsonPath>
    </Parse>
  </RestConnector>

  <RestConnector Title="Artist Lookup" Id="ArtistLookup">
    <Parameters>
      <Radio Id="ArtistType" Title="Select Artist Id Type" DefaultValue="id" Required="false">
        <DataSource>
          <Item Id="id" Title="Artist Id"/>
          <Item Id="amgArtistId" Title="AMG Artist Id"/>
        </DataSource>
      </Radio>		
			<Text Id="ArtistId" Title="Id" Required="true" Debug.DefaultValue="909253"/>
    </Parameters>
    <Paging PageSize="50" EvenPages="true"/>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
				https://itunes.apple.com/lookup?
				@(Model.ArtistType)=@(Model.ArtistId)
				]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="results.*">
				<JsonPath Expr="artistName" Id="ArtistName" Title="Artist Name" Converter="String"/>
				<JsonPath Expr="artistLinkUrl" Id="ArtistLinkUrl" Title="Artist Link URL" Converter="String"/>
				<JsonPath Expr="artistId" Id="ArtistId" Title="Artist Id" Converter="Int"/>
				<JsonPath Expr="amgArtistId" Id="AmgArtistId" Title="AMG Artist Id" Converter="Int"/>
				<JsonPath Expr="primaryGenreName" Id="PrimaryGenreName" Title="Primary Genre Name" Converter="String"/>
				<JsonPath Expr="primaryGenreId" Id="PrimaryGenreId" Title="Primary Genre Id" Converter="Int"/>
			</JsonPath>
    </Parse>
  </RestConnector>

  <RestConnector Title="Video Lookup" Id="VideoLookup">
    <Parameters>
      <Radio Id="MovieType" Title="Select Movie Id Type" DefaultValue="id" Required="false">
        <DataSource>
          <Item Id="id" Title="Movie Id"/>
          <Item Id="amgVideoId" Title="AMG Movie Id"/>
        </DataSource>
      </Radio>		
			<Text Id="MovieId" Title="Id" Required="true" Debug.DefaultValue="335488819"/>
    </Parameters>
    <Paging PageSize="50" EvenPages="true"/>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
				https://itunes.apple.com/lookup?
				@(Model.MovieType)=@(Model.MovieId)
				]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="results.*">
				<JsonPath Expr="kind" Id="Kind" Title="Kind" Converter="String"/>
				<JsonPath Expr="artistName" Id="ArtistName" Title="Artist Name" Converter="String"/>
				<JsonPath Expr="trackName" Id="TrackName" Title="Track Name" Converter="String"/>
				<JsonPath Expr="trackViewUrl" Id="TrackViewUrl" Title="Track View URL" Converter="String"/>
				<JsonPath Expr="collectionPrice" Id="CollectionPrice" Title="Collection Price" Converter="String"/>
				<JsonPath Expr="trackTimeMillis" Id="TrackTimeMS" Title="TrackTimeMS" Converter="Int"/>
				<JsonPath Expr="longDescription" Id="LongDescription" Title="LongDescription" Converter="String"/>
			</JsonPath>
    </Parse>
  </RestConnector>

  <RestConnector Title="Album Lookup" Id="AlbumLookup">
    <Parameters>
      <Radio Id="AlbumType" Title="Select Album Id Type" DefaultValue="id" Required="false">
        <DataSource>
          <Item Id="id" Title="Album Id"/>
          <Item Id="amgAlbumId" Title="AMG Album Id"/>
        </DataSource>
      </Radio>		
			<Text Id="AlbumId" Title="Id" Required="true" Debug.DefaultValue="112041"/>
    </Parameters>
    <Paging PageSize="50" EvenPages="true"/>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
				https://itunes.apple.com/lookup?
				@(Model.AlbumType)=@(Model.AlbumId)
				]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="results.*">
				<JsonPath Expr="artistId" Id="ArtistId" Title="Artist Id" Converter="Int"/>
				<JsonPath Expr="amgArtistId" Id="AmgArtistId" Title="AMG Artist Id" Converter="Int"/>
				<JsonPath Expr="artistName" Id="ArtistName" Title="Artist Name" Converter="String"/>
				<JsonPath Expr="collectionName" Id="CollectionName" Title="Collection Name" Converter="String"/>
				<JsonPath Expr="artistViewUrl" Id="ArtistViewUrl" Title="Artist View URL" Converter="String"/>
				<JsonPath Expr="collectionPrice" Id="CollectionPrice" Title="Collection Price" Converter="String"/>
				<JsonPath Expr="trackCount" Id="TrackCount" Title="Track Count" Converter="Int"/>
				<JsonPath Expr="releaseDate" Id="ReleaseDate" Title="Release Date" Converter="DateTime"/>
				<JsonPath Expr="primaryGenreName" Id="PrimaryGenre" Title="Primary Genre" Converter="String"/>
			</JsonPath>
    </Parse>
  </RestConnector>

  <RestConnector Title="ISBN Lookup" Id="ISBNLookup">
    <Parameters>	
			<Text Id="ISBNId" Title="ISBN Id" Required="true" Debug.DefaultValue="9780316069359"/>
    </Parameters>
    <Paging PageSize="50" EvenPages="true"/>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
				https://itunes.apple.com/lookup?
				isbn=@(Model.ISBNId)
				]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="results.*">
				<JsonPath Expr="kind" Id="Kind" Title="Kind" Converter="String"/>
				<JsonPath Expr="artistId" Id="ArtistId" Title="Artist Id" Converter="Long"/>
				<JsonPath Expr="artistName" Id="ArtistName" Title="Artist Name" Converter="String"/>			
				<JsonPath Expr="artistViewUrl" Id="ArtistViewUrl" Title="Artist View URL" Converter="String"/>
				<JsonPath Expr="trackViewUrl" Id="TrackViewUrl" Title="Track View URL" Converter="String"/>
				<JsonPath Expr="description" Id="Description" Title="Description" Converter="String"/>
				<JsonPath Expr="releaseDate" Id="ReleaseDate" Title="Release Date" Converter="DateTime"/>
				<JsonPath Expr="price" Id="Price" Title="Price" Converter="String"/>
				<JsonPath Expr="trackName" Id="TrackName" Title="TrackName" Converter="String"/>
				<JsonPath Expr="trackId" Id="TrackId" Title="Track Id" Converter="Long"/>
				<JsonPath Expr="averageUserRating" Id="AvgUserRating" Title="Avg Rating" Converter="Double"/>
				<JsonPath Expr="userRatingCount" Id="UserRatingCount" Title="Rating Count" Converter="Int"/>
			</JsonPath>
    </Parse>
  </RestConnector>	
	

</Suite>